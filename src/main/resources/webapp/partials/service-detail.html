<div class ="row">
    <div class="col-md-12">
        <h1>{{service._id}} - {{service.name}} 
            <a href="#/editService/{{service._id}}" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-pencil"></span> Edit Service</a> 
            <a href="#/createVersion/{{service._id}}" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-plus"></span> Add Version</a>
            <a href="#/createEnv/{{service._id}}" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-plus"></span> Add Env</a>
            <a href="#/addImage/{{service._id}}" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-picture"></span> Add Image</a>
        </h1>
    </div>
</div>

<div class="row">
    <div class="col-md-4">
        <dl class="dl-horizontal">
            <dt>Description</dt>
            <dd>{{service.description}}</dd>
            <dt>Team</dt>
            <dd>{{service.team}}<span ng-repeat="t in config.teams"><span ng-if="t.code == service.team"><span ng-if="t.url">, <a ng-href="{{t.url}}" target="_blank">web page</a></span><span ng-if="t.email">, <a ng-href="mailto:{{t.email}}">email</a></span></span></span></dd>
            <dt>Product</dt>
            <dd>{{service.product}}<span ng-repeat="t in config.products"><span ng-if="t.code == service.product"><span ng-if="t.url">, <a ng-href="{{t.url}}" target="_blank">web page</a></span><span ng-if="t.email">, <a ng-href="mailto:{{t.email}}">email</a></span></span></span></dd>
            <dt>State</dt>
            <dd>{{service.state}}</dd>
            <dt>Access</dt>
            <dd>{{service.access}}</dd>
            <dt>Type</dt>
            <dd>{{service.type}}</dd>
            <dt>Technology</dt>
            <dd>{{service.tech}}</dd>
        </dl>
    </div>
    <div class="col-md-4">
        <dl class="dl-horizontal">
            <dt>Links:</dt><dd> </dd>
            <span ng-repeat="link in service.links">
                <dt>{{link.name}}</dt>
                <dd><a ng-href="http://{{link.url}}" target="_blank">http://{{link.url}}</a></dd>
            </span>
            <!--
            <dt><br/>Warnings</dt><dd> </dd>
            <span ng-repeat="warning in service.warnings">
                <dt>Warning</dt>
                <dd>{{warning.text}}</dd>
            </span>
            -->
        </dl>
    </div>
    <div class="col-md-4">
        <dl class="dl-horizontal">
            <dt>HA Ratings:</dt><dd> </dd>
            <span ng-repeat="rating in service.haRatings">
                <dt>{{rating.name}}</dt>
                <dd>{{rating.level}}</dd>
            </span>
            <dt><br/>Classification Ratings:</dt><dd> </dd>
            <span ng-repeat="rating in service.classRatings">
                <dt>{{rating.name}}</dt>
                <dd>{{rating.level}}</dd>
            </span>
        </dl>
    </div>
</div>

<div ng-repeat="version in service.versions">
    <div class ="row">
        <div class="col-md-12">
            <h1>Version {{version.api}} <a ng-href="#/editVersion/{{service._id}}/{{version.api}}" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-pencil"></span> Edit Version</a></h1>
        </div>
    </div>
    <div class ="row">
        <div class="col-md-4">
            <dl class="dl-horizontal">
                <dt>API Ver</dt>
                <dd>{{version.api}}</dd>
                <dt>Status</dt>
                <dd>{{version.status}}</dd>
                <div ng-repeat="link in version.links">
                    <dt>{{link.name}}</dt>
                    <dd>
                        <a ng-href="http://{{link.url}}" target="_blank">http://{{link.url}}</a><br/>
                    </dd>
                </div>
                <div ng-repeat="oper in version.operations">
                    <dt>{{oper.name}}</dt>
                    <dd>
                        <span ng-repeat="env in service.envs">
                            <a ng-href="http://{{env.vip}}{{oper.url}}" target="_blank">{{env.name}}</a><br/>
                        </span>
                    </dd>
                </div>
            </dl>
        </div>
        <div class="col-md-4">
            <table class="table table-hover">
                <tr><th>Uses</th><th>Version</th><th>Scope</th></tr>
                <tr ng-repeat="s in version.uses">
                    <td><a ng-href="#/services/{{s.service}}">{{s.service}}</a></td>
                    <td>v{{s.version}}</td>
                    <td>{{s.scope}}</td>
                </tr>
            </table>
        </div>
        <div class="col-md-4">
            <table class="table table-hover">
                <tr><th>Use By</th><th>Version</th><th>Scope</th></tr>
                <tr ng-repeat="s in version.usedby">
                    <td><a ng-href="#/services/{{s.service}}">{{s.service}}</a></td>
                    <td>v{{s.version}}</td>
                    <td>{{s.scope}}</td>
                </tr>
            </table>
        </div>
    </div>
</div>

<div ng-repeat="env in service.envs">
    <div class ="row">
        <div class="col-md-12">
            <h1>Environment {{env.name}} <a ng-href="#/editEnv/{{service._id}}/{{env.name}}" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-pencil"></span> Edit Env</a> <a ng-href="#/manageEnv/{{service._id}}/{{env.name}}" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-cog"></span> Manage Env</a></h1>
        </div>
    </div>
    <div class ="row">
        <div class="col-md-4">
            <dl class="dl-horizontal">
                <dt>Env</dt>
                <dd>{{env.name}}</dd>
                <dt>VIP Name</dt>
                <dd>{{env.vip}}</dd>
            </dl>
        </div>
        <div class="col-md-8">
            <table class="table table-hover">
                <tr><th>DC</th><th>Name</th><th>Status</th><th>Version</th><th>Operations</th></tr>
                <tr ng-repeat="host in env.hosts">
                    <td>{{host.dataCenter}}</td>
                    <td>{{host.name}}:{{host.port}}</td>
                    <td>{{host.status}}</td>
                    <td>{{host.implVersion}}</td>
                    <td>
                        <span ng-repeat="version in service.versions">
                            <span ng-repeat="oper in version.operations">
                                <a ng-href="http://{{host.name}}:{{host.port}}{{oper.url}}" target="_blank">{{oper.name}}</a>
                            </span>
                        </span>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>

<h1>Images</h1>
<div class="row">
    <div class="col-md-6">
        <div class="service-image">
            <img ng-src="{{mainImageUrl}}">
        </div>
    </div>
    <div class="col-md-6">
        <ul class="service-thumbs">
            <li ng-repeat="img in service.images">
                <img ng-src="{{img}}" ng-click="setImage(img)">
            </li>
        </ul>
    </div>
</div>