<div ng-if="loading">Loading...</div>
<div ng-if="!loading">
  <h1>Across Team Dashboard for {{env}}</h1>
  <div class="row">
    <div class="col-md-6">
      <table class="table table-hover table-striped table-condensed vertical-align">
        <tr>
          <th>Service</th>
          <th ng-repeat="dc in config.dataCenters" class="text-center">{{dc}}</th>
        </tr>
        <tr ng-repeat="module in dashboard.leftModules">
          <td><h3><a href="#!/Service/{{module.serviceId}}">{{module.serviceName}}</a> <small>{{module.moduleName}}</small></h3></td>
          <td ng-repeat="dc in config.dataCenters">
            <h3 style="line-height:0">
              <uib-progress ng-if="module.counts[dc].total > 0" max="module.counts[dc].total" style="margin-bottom:0">
                <uib-bar value="module.counts[dc].good" type="success"><span>{{module.counts[dc].good}}</span></uib-bar>
                <uib-bar value="module.counts[dc].off" type="warning"><span>{{module.counts[dc].off}}</span></uib-bar>
                <uib-bar value="module.counts[dc].bad" type="danger"><span>{{module.counts[dc].bad}}</span></uib-bar>
              </uib-progress>
            </h3>
          </td>
        </tr>
      </table>
    </div>
    <div class="col-md-6">
      <table class="table table-hover table-striped table-condensed vertical-align">
        <tr>
          <th>Service</th>
          <th ng-repeat="dc in config.dataCenters" class="text-center">{{dc}}</th>
        </tr>
        <tr ng-repeat="module in dashboard.rightModules">
          <td><h3><a href="#!/Service/{{module.serviceId}}">{{module.serviceName}}</a> <small>{{module.moduleName}}</small></h3></td>
          <td ng-repeat="dc in config.dataCenters">
            <h3 style="line-height:0">
              <uib-progress ng-if="module.counts[dc].total > 0" max="module.counts[dc].total" style="margin-bottom:0">
                <uib-bar value="module.counts[dc].good" type="success"><span>{{module.counts[dc].good}}</span></uib-bar>
                <uib-bar value="module.counts[dc].off" type="warning"><span>{{module.counts[dc].off}}</span></uib-bar>
                <uib-bar value="module.counts[dc].bad" type="danger"><span>{{module.counts[dc].bad}}</span></uib-bar>
              </uib-progress>
            </h3>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <uib-progress max="3">
    <uib-bar value="1" type="success"><span>200 response code</span></uib-bar>
    <uib-bar value="1" type="warning"><span>Timeout</span></uib-bar>
    <uib-bar value="1" type="danger"><span>Non 200 response code</span></uib-bar>
  </uib-progress>
  <table class="table table-hover table-striped table-condensed vertical-align">
    <tr ng-repeat="dc in config.dataCenters">
      <td style="width: 10%" class="text-center"><h3>{{dc}}</h3></td>
      <td style="width: 10%" class="text-right"><h3>{{dashboard.counts[dc].total}}</h3></td>
      <td style="width: 80%">
        <h3 style="line-height:0">
          <uib-progress ng-if="dashboard.counts[dc].total > 0" max="dashboard.counts[dc].total" style="margin-bottom:0">
            <uib-bar value="dashboard.counts[dc].good" type="success"><span>{{dashboard.counts[dc].good}}</span></uib-bar>
            <uib-bar value="dashboard.counts[dc].off" type="warning"><span>{{dashboard.counts[dc].off}}</span></uib-bar>
            <uib-bar value="dashboard.counts[dc].bad" type="danger"><span>{{dashboard.counts[dc].bad}}</span></uib-bar>
          </uib-progress>
        </h3>
      </td>
    </tr>
  </table>
</div>